###  KGB (Kit "GhostBusters") -  Комплект "Охотники за приведениями" - система обнаружения и учета открытых сетевых портов
KGB представляет собою простое Ruby on Rails приложение, которое помогает работникам сетевой безопасности контролировать внешние сетевые адреса своей компании.
Такой контроль достигается сканирование сетевых портов и сравнением списка легитимных сетевых портов (разрешенных для использования в организации) с результатами сканирования.

#### Установка
* для работы приложению потребуется сканер nmap (здесь и далее по тексту установка пакетов Linux показана на примере Debian\Ubuntu)
```
sudo apt-get install nmap
```
* устанавливаем RVM (вариант 1) - см. [rvm.io] (http://rvm.io/)
* устанавливаем RVM (вариант 2) - если в процессе выполнения инструкций сайта RVM не удается импортировать ключи, поправить ситуацию можно следующим образом
```
curl -sSL https://rvm.io/mpapis.asc | gpg --import -
\curl -sSL https://get.rvm.io | bash -s stable
```
* устанавливаем ruby
```
rvm install 2.3.0
```
* указываем RVM использовать установленную версию ruby по умолчанию
```
rvm use --default 2.3.0
```
* скачиваем приложение
```
git clone https://github.com/atilla777/kgb.git
```
* переходим в папку приложения и устанавливаем зависимости
```
cd kgb
bundle install
```
* устанавливаем node.js
```
sudo apt-get install nodejs
```
* создаем базу данных sqlite
```
rake db:migrate
rake db:seed
```
либо одной командой
```
rake db:setup
```
#### Запуск
* запускаем приложение (вариант 1)
  * запускаем веб приложение
```
rails s
```
 * запускаем вспомогательный процесс планирования\выполнения сканирования
```
rake jobs:work
```
 * процесс планирования\выполнения сканирования можно запустить и фоновым процессом
```
bin/delayed_job start
```
* запускаем приложение (вариант 2)
  * устанавливаем gem foreman*
```
gem install foreman
```
* после этого можно запускать приложение командой
```
foreman start
```
* запускаем браузер и переходим по ссылке
```
http://localhost:3000
```
* Логин для входа:
```
kgb@ussr.su
```
* Пароль:
```
smersh
```
#### Использование
* в меню 'справочники' создаем сервиc, порты которого будет контролировать приложение (для начала у сервиса можно указать только IP адрес контролируемого сервера)
* создаем опции сканирования
* создаем работу, выбрав опции сканирования, указав IP адрес (можно указать и диапазон) или доменное имя контролируемого сервера, проверямый порт или порты (порты указываются через запятую, вместо числа можно указывать диапазон - начальное и конечное значение) 
* примеры задания IP адреса и номеров портов
```
IP адреса целей:
www.test.ru
192.168.1.1
192.168.1.0-20
192.168.1.*
```
```
номера портов целей:
80
21, 80, 3000
21, 80-443, 3000
```
* после создания работы ее можно запустить кликнув по значку лупы
* после завершения сканирования, его результаты можно посмотреть в меню 'панель управления'
